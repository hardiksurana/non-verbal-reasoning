<!DOCTYPE html>
<html>
   <head>
      <title>NVR Quiz</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script
         src="https://code.jquery.com/jquery-3.4.1.js"
         integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
         crossorigin="anonymous"></script>
   </head>
        
   <body>
      <p>{{ question_text }}</p>
      <img width="200" height="200" src="data:image/png;base64,{{question}}"/>
      <hr>
      <form id="questionSubmission" action = "{{ url_for('feedback') }}" method = "POST">
         <div id="radio_buttons">
            <label>
               <input type="radio" name="options" value="{{answer}}" />
                  <img width="200" height="200" src="data:image/png;base64,{{answer}}" alt="answer"/>
               </input>
            </label>
            <label>
               <input type="radio" name="options" value="{{dist_1}}" />
                  <img width="200" height="200" src="data:image/png;base64,{{dist_1}}" alt="dist_1"/>
               </input>
            </label>
            <label>
               <input type="radio" name="options" value="{{dist_2}}" />
                  <img width="200" height="200" src="data:image/png;base64,{{dist_2}}" alt="dist_2"/>
               </input>
            </label>
            <label>
               <input type="radio" name="options" value="{{dist_3}}" />
                  <img width="200" height="200" src="data:image/png;base64,{{dist_3}}" alt="dist_3"/>
               </input>
            </label>
         </div>
         
         <br/>

         <p><input type='hidden' id='timeTaken' name='timeTaken' value='' /></p>
         <p><input type="button" value="Submit" onclick="updateTime()"/></p>
      </form>

      <script type="text/javascript">
         var time_in_secs = 0
         function add_time() {
            time_in_secs = time_in_secs + 1
            console.log(time_in_secs)
         }

         window.onload = function() {
            window.setInterval(add_time, 1000);

            // to shuffle the options
            var options = $("#radio_buttons");
            options.html(
               options.find("label").sort(function(){
                  return Math.round(Math.random())-0.5;
               })
            );
         }

         function updateTime() {
            document.getElementById("timeTaken").value = time_in_secs.toString();
            clearInterval(add_time)
            document.getElementById("questionSubmission").submit();
         }
      </script>
   </body>
</html>