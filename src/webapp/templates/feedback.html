{% extends "template.html" %}

{% block title %}
  Feedback | NVR Quiz
{% endblock %}

{% block content %}

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Non-Verbal Reasoning Quiz</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

  <div class="container">
    <br>
    <div class="alert alert-info" role="alert" style="display: inline-block;">
      Provide your honest feedback and scroll down to see how you performed in this question!
    </div>
    <div class="card">
        <h3 class="card-header">Feedback</h3>
      <div class="card-body">
        <form id="feedbackSubmission" action="{{ url_for('generate') }}" method="POST">
          
          <!-- question 1 -->
          <div class="form-group">
            <!-- <p>Do you think this question was generated by a machine?</p> -->
            <p>
              <span style="font-weight: bold">
              How do you think this question was made?</span>
            </p>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="machineGenerated" id="manuallyCreated" value="created by human" checked="checked">
              <label class="form-check-label" for="manuallyCreated">Created by Human</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="machineGenerated" id="machineGenerated" value="generated by machine">
              <label class="form-check-label" for="machineGenerated">Generated by Machine</label>
            </div>
          </div>

          <!-- question 2 -->
          <div class="form-group">
            <p>
              <span style="font-weight: bold">
                On a scale of 1-10, rate the difficulty level of the question.
              </span>
            </p>
            <p>(1 being lowest, 10 being highest)</p>
            <select name="difficultyScale" class="form-control col-lg-3" required>
              {% for n in range(1, 11) %}
              <option value={{n}}>{{n}}</option>
              {% endfor %}
            </select>
          </div>

          <!-- question 3 -->
          <div class="form-group">
            <p>
              <span style="font-weight: bold">
                Was the question challenging?
              </span>
            </p>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="challengingQuestion" id="yes" value="yes">
              <label class="form-check-label" for="yes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="challengingQuestion" id="no" value="no" checked="checked">
              <label class="form-check-label" for="no">No</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="challengingQuestion" id="couldNotSolve" value="could not solve">
                <label class="form-check-label" for="couldNotSolve">Could Not Solve</label>
              </div>
          </div>

          <p><input type='hidden' id='timeTaken' name='timeTaken' value='' /></p>
          <button type="button" class="btn btn-primary" onclick="updateTime()">Submit Feedback</button>

          <!-- question 4 -->
          <!-- <div class="form-group">
            <p>On a scale of 1-10, rate how easy it was to spot the answer amongst the other options.</p>
            <p>(1 being easiest, 10 being most difficult)</p>
            <select name="triviality" class="form-control col-lg-3" required>
                {% for n in range(1, 11) %}
                <option value={{n}}>{{n}}</option>
                {% endfor %}
              </select>
          </div> -->

          <!-- question 5 -->
          <!-- <div class="form-group">
            <p>Did you find this question interesting?</p>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="interestingQuestion" id="yes" value="yes" required>
              <label class="form-check-label" for="yes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="interestingQuestion" id="no" value="no">
              <label class="form-check-label" for="no">No</label>
            </div>
          </div> -->

          <!-- question 6 -->
          <!-- <div class="form-group">
            <p>Were you able to understand the question? Was the question clear?</p>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="clearQuestion" id="yes" value="yes" required>
              <label class="form-check-label" for="yes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="clearQuestion" id="no" value="no">
              <label class="form-check-label" for="no">No</label>
            </div>
          </div> -->

          <!-- question 7 -->
          <!-- <div class="form-group">
            <p>Did the question promote you to think?</p>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="inducedThinking" id="yes" value="yes" required>
              <label class="form-check-label" for="yes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="inducedThinking" id="no" value="no">
              <label class="form-check-label" for="no">No</label>
            </div>
          </div> -->
        </form>
      </div>
    </div>

    <br />
    <br />
    <!-- view the answer option and what the user entered -->
    <div class="card">
        <h3 class="card-header">Response</h3> 
        <div class="card-body">
            <p class="lead">Question</p>
            {% if verdict == 'correct' %}
              <div class="alert alert-success" role="alert" style="display: inline-block;">
                You answered it right! &#128513;
              </div>
            {% else %}
              <div class="alert alert-danger" role="alert" style="display: inline-block;">
                You answered it wrong! &#128532;
              </div>
            {% endif %}
            <br />
            <div class="question">
              <img class="img-thumbnail" src="data:image/png;base64,{{question_img}}"
                  style="display: block; max-width: 80%; max-height: 80%;" />
             </div>
             <hr />
             <table class="table table-bordered table-hover">
                <thead>
                  <tr>
                    <th scope="col">Correct Answer</th>
                    <th scope="col">Your Response</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <img class="img-thumbnail" src="data:image/png;base64,{{answer_img}}" style="display: block; align-content: center; max-width: 80%; max-height: 80%;" />
                    </td>
                    <td>
                      <img class="img-thumbnail" src="data:image/png;base64,{{response_img}}" style="display: block; align-content: center; max-width: 80%; max-height: 80%;" />
                    </td>
                  </tr>
                </tbody>
              </table>
        </div>
    </div>
  </div>

{% endblock %}


{% block script %}
   <script type="text/javascript">
      var time_in_secs = 0
      function add_time() {
         time_in_secs = time_in_secs + 1
      }

      window.onload = function () {
        window.setInterval(add_time, 1000);
      }

      function updateTime() {
         document.getElementById("timeTaken").value = time_in_secs.toString();
         clearInterval(add_time)
         document.getElementById("feedbackSubmission").submit();
      }
   </script>
{% endblock %}